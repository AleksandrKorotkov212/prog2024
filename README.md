# программа кластер-анализа
Что она делает и для чего вообще нужна?

Эта программа умеет генерировать поле пикселей, затем совершать с ним некоторые преобразования и (скоро это тоже будет) строить маршрут между двумя заданными точками.

# Как работает программа?

Первоначально необходимо правильно подготовить вспомогательные файлы.

Первый и самый важный файл - Config-файл. В нем записываются базовые параметры, которые в случае ошибок или недостатка данных будут использоваться программой.

Пример Config-файла:

file  (здесь нужно написать, откуда будут вводиться команды. В примере написано "file" - это значит, что команды вводятся из специального файла. Также можно написать "key" - тогда команды надо вводить вручную с клавиатуры через консоль)
batch.txt  (если Вы хотите вводить команды из файла, то в этой строке надо написать его название. Иначе строку пропускаем)
batch_pause (Эту строку нужно написать, если Вы хотите управлять процессом ввода команд динамически)
ON (если здесь, как в примере, написано "ON", то после каждой команды необходимо подтверждение в виде "ENTER", иначе пишем "OFF")
interfacelog  (если хотим писать логи клиента, пишем эту строку и ниже пишем "ON", иначе "OFF")
ON
controllog (Аналогичн для класса-диспетчера (сервера))
ON
xfield (параметр по умолчанию, ответственный за длину поля пикселей)
100
yfield (параметр по умолчанию, ответственный за ширину поля пикселей)
100
xdefault (параметр по умолчанию, ответственный за координату х расположения Гауссианы)
10
ydefault (параметр по умолчанию, ответственный за координату у расположения Гауссианы)
10
sigma_x_default (параметр по умолчанию, ответственный за отклонение по оси х для Гауссианы)
1
sigma_y_default (параметр по умолчанию, ответственный за отклонение по оси у для Гауссианы)
1
hdefault (параметр по умолчанию, ответственный за высоту Гауссианы)
1


# команды и как их вводить



Команды(параметры) и объяснения к ним: 
init (int,int) – (инициализирует поле размерами которые вы зададите (первый аргумент - длина, второй - ширина))
gauss (int,int,double,double,int) – (запоминает гаусс с параметрами которые вы зададите (первый аргумент - координата х расположения вершины, второй - координата у расположения вершины, третий - отклонение по оси х, четвертый - отклонение по оси у, пятый - высота Гауссианы))
generate – (разместит все гауссы на поле) 
gnuplot (const std::string) – (готовит данные для передачи их в гнуплот (параметр - строка с названием файла))
wBMP(const std::string, int, int) – (рисует текущее поле в формате bmp (первый параметр - строка с названием файлаб второй - если нужно писать ч/б, то пишем "0", иначе "1", третий - если нужно рисовать факторы, то "1", иначе "0")) 
BIN (int)  - (делает срез поля по заданной высоте (параметр - высота)) 
rBMP (std::ifstream&, int, int) – (загружает поле с bmp файла (первый аргумент - название файла, второй - длина поля, третий - ширина)) 
wave (int) – (находит компоненты связности на срезе и считает их количество (параметр - шум (минимальное количество пикселей, при которых алгоритм заметит компоненту связности))) 
kMeans (int, int) – (выполняет алгоритм kMeans, находя центры связных компонент (первый параметр - количество ядер, второй - количество случайно выбранных точек (центроид) в каждой компоненте))
Triangulate (const std::string) - триангуляция по центрам компонент (параметр - строка с названием файла))
away – (выход с программы)


Если Вы не вводите команды с клавиатуры, то их нужно вводить из специального файла (его название Вы должны были указать в Config-файле)

# файл с командами
Пример batch.txt (файла с командами):

init
100 100
gauss
1 1 1 1 -67
gauss
15 24 0.5 0.1 -50
gauss
23 47 1 1 -70
gauss
3 5 6 7 -23
gauss
50 9 4 6 -100
gauss
48 51 2 4 -10
gauss
71 62 0.1 0.5 -100
gauss
80 2 0.2 0.3 -150
gauss
4 50 2 3 -100
gauss
2 4 3 1 -50
gauss
37 43 2 5 -70
gauss
1 2 1 1 -40
gauss
5 90 0.2 1 -43
gauss
56 34 0.1 0.2 10
gauss
80 1 1 1 -30
gauss
27 65 1 1 -60
gauss
30 90 1 1 -50
gauss
48 2 2 2 -52
gauss
10 10 1 1 -40
gauss
87 80 1 1 -35
gauss
50 43 1 1 -80
gauss
27 95 1 1 -40
gauss
34 45 1 2 3
gauss
5 4 3 1 -70
gauss
5 6 1 1 -40
gauss
87 2 1 1 -90
gauss
2 45 1 1 -35
gauss
45 5 0.1 3 -50
gauss
56 23 3 1 -43
generate
gnuplot
gnuplot.txt
wBMP
BMP.bmp
1
0
BIN
2
Wave 
4
kMeans
4 4
Triangulate
Triangulate.bmp
away

# что вообще есть в репозитории
в PDF-файлах лежат примеры выполнения части команд, в файлах interfacelog.txt и controolog.txt записи логов при прогоне этих тестов. В ветке prog лежат версии программы (актуальная на данный момент - prog_with_triangles). Также есть общийц для всех тестов config-файл и отдельные batch-файлы (файлы с командами).
Также есть файл help.txt, о нем подробнее:


# help.txt

В этом файле сейчас написано примерно то же самое, что и в файле ReadMe, но help будет включать в себя больше примеров работы программы, в частности, в нем будут освещаться тонкости работы каждой функции (с картинками)
 
# важные уточнения

1) в конце командного файла ОБЯЗАТЕЛЬНО написать команду "away"
2) перед запуском команды "generate" необходимо убедиться, что поле сгенерировано (сработала команда "init" или "rBMP")
3) повторный запуск команды "init" приведет к ошибке
